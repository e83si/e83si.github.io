<!DOCTYPE html>
<html>
  <head>
    <title>Diagnosis on CAN-Bus â€” 2007 BMW X3 3.0si (E83) L6-3.0L (N52K) Service Manual | Operation CHARM</title>
    <meta name='description' content="Detailed repair manual for the 2007 BMW X3 3.0si (E83) L6-3.0L (N52K).">
    <style>
      .li-folder {
	  list-style-image: url('/icons/folder.svg');
      }
      .li-folder.li-folder-open {
	  list-style-image: url('/icons/folder-open.svg');
      }
    </style>
    <link rel='stylesheet' href="../../../../../../../style.css">
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  </head>
  <body>
    <div class='theme-colors header'>
      <div class='branding'><b>Operation CHARM</b>: Car repair manuals for everyone.</div>
<div class=breadcrumbs><a class='breadcrumb-part' href="../../../../../../../">Home</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../BMW/">BMW</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../BMW/2007/">2007</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../index.html">X3 3.0si (E83) L6-3.0L (N52K)</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html">Repair and Diagnosis</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html#Powertrain%20Management/">Powertrain Management</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html#Powertrain%20Management/Transmission%20Control%20Systems/">Transmission Control Systems</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html#Powertrain%20Management/Transmission%20Control%20Systems/Description%20and%20Operation/">Description and Operation</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html#Powertrain%20Management/Transmission%20Control%20Systems/Description%20and%20Operation/Transmission%20Control%20%28EGS%206HPTU%20Transmission%20Control%29/">Transmission Control (EGS 6HPTU Transmission Control)</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/index.html#Powertrain%20Management/Transmission%20Control%20Systems/Description%20and%20Operation/Transmission%20Control%20%28EGS%206HPTU%20Transmission%20Control%29/Mechatronics%20Interfaces/">Mechatronics Interfaces</a> <b>&gt;&gt;</b> <a class='breadcrumb-part' href="../../../../../../../Repair%2520and%2520Diagnosis/Powertrain%2520Management/Transmission%2520Control%2520Systems/Description%2520and%2520Operation/Transmission%2520Control%2520%2528EGS%25206HPTU%2520Transmission%2520Control%2529/Mechatronics%2520Interfaces/Diagnosis%2520on%2520CAN-Bus/index.html">Diagnosis on CAN-Bus</a></div></div>
<div class='main'>
<h1>Diagnosis on CAN-Bus</h1> <br><br><br><b>Diagnosis On CAN-bus</b><br><br>The CAN (Controller Area Network) bus system is a linear bus system that is characterized by the following features:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>signals are broadcast in both directions<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>a message is received by all bus nodes. Each node decides for itself whether to process the message or not.<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>new nodes can be added by simple parallel connection<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>the bus system forms a multi-master structure<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>each node can be master or slave depending on whether it is connected as transmitter or receiver<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>the transmission medium is a two-core lead; the cores are designated CAN Low and CAN High.<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Switching off defective control modules<br><br>In general, every node can communicate with all other nodes via the bus. An access mechanism controls data exchange on the bus. The main differences between the K-CAN (body CAN) bus and the PT-CAN (power train CAN) bus are detailed below:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>K-CAN: Data transfer rate around <b>100 kBits/s</b>. Single-wire operation possible.<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>PT-CAN: Data transfer rate around <b>500 kBits/s</b>. No single-wire operation possible.<br><br><b>Master:</b> the master is the active communicating node, i.e. the one that initiates communication. The master is in control of the bus and controls communication. It can send messages to the passive communicating nodes (slaves) on the bus network and on request receive messages from them.<br><br><b>Slave:</b> the slave is the passive communicating node. It is instructed to receive and send data.<br><br><b>Multimaster system:</b> a multimaster system is one in which all communication nodes can take on the role of master or slave at a particular time.<br><br><b>Causes</b><br>The failure of communication on the CAN-bus may be caused by the following:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Circuit breaks or short circuits on the CAN Low or CAN High communication leads<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Defective plug connections (contact damage, soiling, corrosion)<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Interference voltages in the vehicle electrical system (caused for instance by defective <a href="../../../../../../../Repair%2520and%2520Diagnosis/Powertrain%2520Management/Ignition%2520System/Ignition%2520Coil/index.html">ignition coils</a> or ground connections)<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Failure of the communication modules in the individual control modules<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Failure of the voltage supply of individual control modules (a battery voltage decreasing gradually when the battery is almost discharged can also lead to fault code entries as not all control modules switch off simultaneously due to the voltages supply being too low).<br><br><b>Inspection procedure for impedance measurement PT-CAN, F-CAN, Local-CAN</b><br>When measuring impedance, it is generally necessary to disconnect the circuit being tested from the power supply beforehand. The vehicle's battery should therefore be disconnected. Wait about three minutes to allow all capacitors in the system to discharge.<br><br>Inspection procedure for resistance test:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>the CAN bus must be disconnected from the power supply<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>No other testing equipment must be in use (connected in parallel)<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>The measurement is taken between the CAN Low and CAN High leads<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>the measurements recorded may differ from the specified levels by a few Ohms<br><br><b>Impedance measurement with matching resistor PT-CAN, F-CAN, Local-CAN</b><br>On the Tester, switch to Measurement system -> Multimeter<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement function: Resistance<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measuring range: automatic<br><br>In order to prevent signal reflection, a <b>120 Ohms</b> resistor is fitted to two CAN bus nodes (at the extremities of the PT-CAN network). The two terminal resistors are connected in parallel and form a shunt impedance of <b>60 Ohms</b>. When the power supply is switched off, that shunt impedance can be measured across the communication leads. In addition, the individual resistors can be tested independently of one another. (Tip for <b>60 Ohms</b> measurement: disconnect an easily accessible control module from the bus and then measure the impedance between the CAN Low and CAN High leads on the connector.)<br><br><b>DC voltage measurement PT-CAN, F-CAN, Local-CAN</b><br>Precondition for the measurement: battery connected and ignition on!<br><br>On the Tester, switch to Measurement system -> Multimeter<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement function: Voltage<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement type: =<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measuring range: automatic<br><br>In order to establish whether the CAN Low or CAN High lead is defective, you can measure the CAN Low (CAN High) voltage to ground.<br><br>CAN Low to ground: voltage approx. <b>2.4 V</b><br><br>CAN High to ground: voltage approx. <b>2.6 V</b><br><br>These values are approximate values and can vary by a few hundred mV depending on the bus load.<br><br><b>Oscilloscope measurement PT-CAN, F-CAN, Local-CAN</b><br>Precondition for the measurement: battery connected and ignition on!<br><br>On the Tester, switch to Measurement system -> Oscilloscope setting<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement type: =<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measuring range: <b>+/- 5 V</b><br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Frequency range: <b>1 kHz</b><br><br>In order to obtain a clear idea of whether the CAN bus is functioning properly, it is very useful to be able to observe activity on the bus. What is important here is not to analyze the actual data being transmitted but simply to be able to see that the CAN bus is operating. The oscilloscope test can state that, "the CAN bus is probably operating without faults".<br><br>If the oscilloscope is used to measure the voltage differential between the CAN Low and CAN High ground leads, a square wave signal with the voltage limits U(min) = <b>1.5 V</b> and U(max) = <b>2.5 V</b> is obtained.<br><br>If the oscilloscope is used to measure the voltage differential between the CAN High and CAN Low ground leads, a square wave signal with the voltage limits U(min) = <b>2.5 V</b> and U(max) = <b>3.5 V</b> is obtained.<br><br>These values are approximate values and can vary by a <b>few hundred mV</b> depending on the bus load.<br><br><b>Resistance test K-CAN</b><br>No defined resistance test can be carried out at the K-CAN data bus, as the resistance varies depending on the internal switching logic of the control modules!<br><br><b>Measuring K-CAN DC Voltage</b><br>Precondition for the measurement: battery connected and ignition on!<br>On the Tester, switch to Measurement system -> Multimeter<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement function: Voltage<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement type: =<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measuring range: <b>+/-10 V</b><br><br>In order to establish whether the CAN Low or CAN High lead is defective, you can measure the CAN Low (CAN High) voltage to ground.<br><br>CAN Low to ground: voltage approx. <b>4.8 V</b><br><br>CAN High to ground: voltage approx. <b>0.2 V</b><br><br>These values are approximate values and can vary by a few hundred mV depending on the bus load.<br><br><b>Oscilloscope measurement K-CAN</b><br>Precondition for the measurement: battery connected and ignition on!<br>On the Tester, switch to Measurement system -> Oscilloscope setting<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measurement type: =<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Measuring range: automatic<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Frequency range: <b>1 kHz</b><br><br>In order to obtain a clear idea of whether the CAN bus is functioning properly, it is very useful to be able to observe activity on the bus. What is important here is not to analyze the actual data being transmitted but simply to be able to see that the CAN bus is operating. The oscilloscope test can state that, "the CAN bus is probably operating without faults".<br><br>If the oscilloscope is used to measure the voltage differential between the CAN Low and CAN High ground leads, a square wave signal with the voltage limits U(min) = <b>1 V</b> and U(max) = <b>5 V</b> is obtained.<br><br>If the oscilloscope is used to measure the voltage differential between the CAN High and CAN Low ground leads, a square wave signal with the voltage limits U(min) = <b>0 V</b> and U(max) = <b>4 V</b> is obtained.<br><br>These values are approximate values and can vary by a few hundred mV depending on the bus load.<br><br><b>CAN bus without function</b><br>If the K-CAN or PT-CAN data bus indicate no function, it is likely that a short circuit has occurred on the CAN Low and/or CAN High lead, or that a control module is defective. In order to localize the cause of the fault, it makes sense to use the following procedure:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Disconnect one CAN-bus node after the other until the unit causing the fault (= control module x) is found<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Check the lines to control module x for short circuits<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>If possible, check control module x<br><br>However, this procedure only leads to success if a tap line from a control module to the CAN bus has a short circuit. If a CAN bus lead itself has a short circuit, the wiring harness must be checked.<br><br><b>Diagnosis</b><br>Two different bus faults can be entered in the CAN bus control modules:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>CAN communication fault<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>CAN wire fault<br><br>The communication fault provides an overview of the control modules that have failed on the CAN bus, i.e. were no longer able to communicate. The "CAN communication fault" can only be read out if the fault is currently not present. If the fault is currently present, it is no longer possible to communicate with the control module. This means that the fault memory cannot be read, either!<br><br>Physical wire fault can be detected by the use of fault-tolerant CAN transceivers. However, at the moment there are only fault-tolerant transceivers for the K-CAN data bus. This means that only control modules that are connected to the K-CAN data bus can have made the fault memory entry "CAN wire fault" The CAN transceiver is also unable to distinguish between the individual fault categories listed below. If the bus fault "CAN wire fault" is entered in a control module, this can mean:<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Break in wiring CAN High<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Break in wiring CAN Low<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Short circuit CAN High to ground or positive<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Short circuit CAN Low to ground or positive<br><span class='indent-2'>&#09;</span>-<span class='indent-5'>&#09;</span>Short circuit CAN High to CAN Low<br><br><b>Break in wiring (single-wire operation):</b> each control module contains a separate bus termination. This means that, even in the case of a break in wiring, the voltage level can be maintained across the entire K-CAN network. The consequence of this is that a transmitting control module does not detect this fault and continues to work in two-wire operation. However, if a control module transmits a message across the break, the receiving control module only detects activity on the undamaged bus line. The receiving control module thus detects single-wire operation and sets the fault "CAN wire fault". If different control modules receive messages across the break, a number of control modules can have made this fault memory entry in single-wire operation!<br><br><b>Short circuit:</b> if there is a short circuit in the system, all K-CAN control modules must have entered the fault "CAN wire fault". In order to localize the short circuit, follow the procedure for "CAN bus without function".</div>
<div class="theme-colors footer">
  <i>pro multis</i> Â· <a href="/about.html">About Operation CHARM</a>
</div>
<script>const baseUrl="/"</script>
<script src="../../../../../../../script.js"></script>
</body>
</html>
